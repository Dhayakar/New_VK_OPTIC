<form #ExpensetranForm="ngForm">
  <div class="col-sm-12 borderline">
    <div class="row">
      <h6>Expense</h6>
    </div>

    <div class="row">
      <div class="col-sm-2">
        <mat-form-field appearance="outline">
          <mat-label>Date</mat-label>
          <input required autocomplete="off" [min]="DLDateMAXop" matInput [matDatepicker]="pickerop"
                 placeholder="Choose a date" [(ngModel)]="M_DAte" name="issuedayte">
          <mat-datepicker-toggle matSuffix [for]="pickerop"></mat-datepicker-toggle>
          <mat-datepicker #pickerop></mat-datepicker>
        </mat-form-field>
      </div>
      <div class="col-sm-3">
        <mat-form-field appearance="outline">
          <mat-label>Paid to</mat-label>
          <input autocomplete="off" [(ngModel)]="M_Paidto" name="M_paidtos" matInput placeholder="Enter Text">
        </mat-form-field>
      </div>
      <div class="col-sm-5"></div>
      <div class="col-sm-2">
        <button class="btn btn-warning-default" (click)="Getformaccess()"><i class="fas fa-eye"></i>View Access</button>
      </div>
    </div>
    <div class="row">
      <div class="example-container mat-elevation-z8">
        <table mat-table [dataSource]="dataSource">
          <ng-container matColumnDef="Sno">
            <th mat-header-cell *matHeaderCellDef> Sno </th>
            <td mat-cell *matCellDef="let transaction; let i = index">{{i+1}}</td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="Description">
            <th mat-header-cell *matHeaderCellDef> Description </th>
            <td mat-cell *matCellDef="let transaction"> Staff Welfare</td>
            <td mat-footer-cell *matFooterCellDef>Total</td>
          </ng-container>
          <ng-container matColumnDef="Amt">
            <th mat-header-cell *matHeaderCellDef> Amount </th>
            <td mat-cell *matCellDef="let transaction">1000.00</td>
            <td mat-footer-cell *matFooterCellDef> 0.00 </td>
          </ng-container>
          <ng-container matColumnDef="Actions">
            <th mat-header-cell *matHeaderCellDef> Actions </th>
            <td mat-cell *matCellDef="let transaction"> Delete </td>
            <td mat-footer-cell *matFooterCellDef> </td>
          </ng-container>
          <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky: true"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          <tr mat-footer-row *matFooterRowDef="displayedColumns; sticky: true"></tr>
        </table>
      </div>

    </div>
    <div class="row">
      <div class="col-sm-12 mt-1p">
          <h5 class="card-header bg-success text-white">
            Payment details
            <button style="float:right" class="btn btn-warning-default" data-toggle="tooltip" title="Add Payment details" (click)="AddPaymentDetailsNewgrid()"><i style="margin-right:1%" class="fa fa-money"></i>Add Payment</button>
          </h5>
            <div class="row" heightAuto-300px>
              <table mat-table [dataSource]="dataSource3" class="custom-table withoutbackgroung search-table table-bordered" style="width:98%">

                <ng-container matColumnDef="PaymentMode">
                  <th mat-header-cell *matHeaderCellDef>Payment Mode</th>
                  <td mat-cell *matCellDef="let element;let id = index;">
                    <mat-form-field appearance="outline">
                      <mat-select (selectionChange)="PaymentChange(id,$event,element)">
                        <mat-option *ngFor="let Paymentsmode of Paymentsmodes" [value]="Paymentsmode.Value">
                          {{Paymentsmode.Text}}
                        </mat-option>
                      </mat-select>
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
                <ng-container matColumnDef="BankName">
                  <th mat-header-cell *matHeaderCellDef>Bank Name</th>
                  <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'">
                    <mat-form-field appearance="outline">
                      <input (blur)="BankName($event,element)"  [disabled]="element.PaymentMode =='Cash'  " maxlength="100" matInput placeholder="Enter BankName" name="BankName" type="text">
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
                <ng-container matColumnDef="InstrumentNumber">
                  <th mat-header-cell *matHeaderCellDef>Instrument Number</th>
                  <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'">
                    <mat-form-field appearance="outline">
                      <input (blur)="InstrumentNumber($event,element)" [disabled]="element.PaymentMode =='Cash'" maxlength="15" (keypress)="numberOnly($event)" matInput placeholder="Enter Instrument Number" name="InstrumentNumber" type="text">
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
                <ng-container matColumnDef="InstrumentDate">
                  <th mat-header-cell *matHeaderCellDef>Instrument Date</th>
                  <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash' || element.PaymentMode !='Debit card'|| element.PaymentMode !='Credit Card'">
                    <mat-form-field appearance="outline">
                      <input [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card'|| element.PaymentMode =='Credit Card' "
                             name="InstrumentDate" autocomplete="off" [min]="maxToDate" matInput [matDatepicker]="InstrumentDate" (dateChange)="dateofinstrument($event,element)" placeholder="InstrumentDate">
                      <mat-datepicker-toggle matSuffix [for]="InstrumentDate"></mat-datepicker-toggle>
                      <mat-datepicker #InstrumentDate></mat-datepicker>
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef> </td>
                </ng-container>
                <ng-container matColumnDef="ExpiryDate">
                  <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
                  <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Demand Draft' ">
                    <mat-form-field appearance="outline">
                      <input (dateChange)="dateexpiry($event,element)" [disabled]="element.PaymentMode =='Cash'|| element.PaymentMode =='Demand Draft' " autocomplete="off" [min]="MINExpiryDate"
                             name="ExpiryDate" matInput [matDatepicker]="ExpiryDate" placeholder="ExpiryDate" type="datetime">
                      <mat-datepicker-toggle matSuffix [for]="ExpiryDate"></mat-datepicker-toggle>
                      <mat-datepicker #ExpiryDate></mat-datepicker>
                    </mat-form-field>
                  </td>
                  <td mat-footer-cell *matFooterCellDef><b>Total</b></td>
                </ng-container>
                <ng-container matColumnDef="Branch">
                  <th mat-header-cell *matHeaderCellDef>Branch</th>
                  <td mat-cell *matCellDef="let element"
                      [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Debit card' || element.PaymentMode !='Credit Card'">
                    <mat-form-field appearance="outline">
                      <input (blur)="Branch($event,element)"
                             [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card' || element.PaymentMode =='Credit Card'"
                             (keypress)="nameField($event)" maxlength="50" matInput name="Branch" placeholder="Branch" type="text">
                    </mat-form-field>

                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>
                <ng-container matColumnDef="Amount">
                  <th mat-header-cell *matHeaderCellDef>Amount</th>
                  <td mat-cell *matCellDef="let element;let id = index" required (keyup)="Amount(id,'Amount',$event,element)" (keypress)="numberOnly($event)" [contentEditable]="disableRow">
                   

                  </td>
                  <td mat-footer-cell *matFooterCellDef>
                    <strong>
                   
                    </strong>
                  </td>
                </ng-container>
                <ng-container matColumnDef="Action">
                  <th mat-header-cell *matHeaderCellDef>Action</th>
                  <td mat-cell *matCellDef="let element;let id = index" [contentEditable]="disableRow">
                    <i class="fas fa-trash-alt icon-delete" title="Delete" (click)="removePaytype(i)"></i>
                  </td>
                  <td mat-footer-cell *matFooterCellDef></td>
                </ng-container>
                <tr mat-header-row *matHeaderRowDef="displayedColumns3;sticky: true"></tr>
                <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumns3"></tr>
                <tr mat-footer-row *matFooterRowDef="displayedColumns3;"></tr>
              </table>
            </div>
      </div>
    </div>

    <div class="col-sm-12 m-3">
      <div class="col-sm-12 pb25 ml-12p">
        <div class="col-sm-4  sub-section btn-wrap f-r">
          <button type="button" class="btn btn-warning-default" (click)="clear()"><strong>Cancel</strong></button>          
          <button  [disabled]="isNextButton" class="success btn btn-primary" (click)="Submit()">Submit</button>
        </div>
      </div>
    </div>
  </div>
</form>



<div class="modal" role="dialog" [ngStyle]="{'display':accesspopup1}">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="modalcloseAccessOk()">&times;</button>
        <h4 class="modal-title">Expense Transaction - View Access</h4>
      </div>
      <div class="modal-body">
        <table align="center" class=" table custom-table">
          <thead>
            <tr>
              <th>Add</th>
              <th>Edit</th>
              <th>Delete</th>
              <th>Export</th>
              <th>Print</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let x of accessdata; index as i">
              <td><mat-checkbox [(checked)]="x.Add" disabled></mat-checkbox></td>
              <td><mat-checkbox [(checked)]="x.Edit" disabled></mat-checkbox></td>
              <td><mat-checkbox [(checked)]="x.Delete" disabled></mat-checkbox></td>
              <td><mat-checkbox [(checked)]="x.Export" disabled></mat-checkbox></td>
              <td><mat-checkbox [(checked)]="x.Print" disabled></mat-checkbox></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" data-dismiss="modal" autofocus (click)="modalcloseAccessOk()">Ok</button>
      </div>
    </div>
  </div>
</div>
