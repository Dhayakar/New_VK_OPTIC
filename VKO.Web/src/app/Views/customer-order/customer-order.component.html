<form #CustomerOrder="ngForm" name="CustomerOrder" (keydown.enter)="$event.preventDefault()" novalidate>
  <div class="col-sm-12">
    <div class="row">
      <h5 align="center" class="card-header">
        <b>Customer &nbsp; Order</b>
      </h5>
    </div>
  </div>
  <div class="col-sm-12 border-blue border-radius">
    <div class="row m-3">
      <div class="row">
        <div class="col-sm-1"></div>
        <div class="col-sm-2 ml-n7p">
          <button class="btn btn-primary" [disabled]="ViewOpPreslist" (click)="ViewAllPrescription()">Optical Prescriptions List</button>
        </div>
        <div class="col-sm-2 ml-7p">
          <button class="btn btn-primary" [disabled]="ViewOpPres" (click)="ViewPrescriptionDetail()">View Optical Prescription</button>
        </div>
        <div class="col-sm-1 ml-2p">
          <button mat-icon-button (click)="selectuploadnew()" [disabled]="DisabledPrescriptions">
            <mat-icon data-toggle="tooltip" title="Upload Prescriptions" class="cursor">cloud_upload</mat-icon>
          </button>
        </div>
        <div class="col-sm-2 f-r">
          <button type="button" class="btn-text f-r" (click)="Getformaccess()"><i class="fas fa-eye"></i> View Access</button>
        </div>
      </div>
      <div class="col-sm-4 mt-0px width-32p">
        <div class="row">
          <div class="col-sm-7">
            <div class="row">
              <div class="col-sm-9">
                <mat-label class="refcol">Customer Name:</mat-label>
              </div>
              <div class="col-sm-3 mt-n4p ml-n33p">
                <button mat-icon-button (click)="RegisteredCustomer()" [disabled]="DisabledPrescriptions">
                  <mat-icon [disabled]="DisabledPrescriptions" class="cursor" data-toggle="tooltip" title="Search Customer Details">search</mat-icon>
                </button>
              </div>
            </div>
          </div>
          <div class="col-sm-6 f-r mt-n9p width-60p">
            <mat-label class="ml-n10p">{{M_CustomerName}}</mat-label>
          </div>
        </div>
        <div class="row ml-1p">
          <div class="col-sm-3 ml-9p height-50px">
            <mat-label class="refcol">Address:</mat-label>
          </div>
          <div class="col-sm-5 ml-n2p">
            <mat-label>{{M_Address}}</mat-label>
          </div>
        </div>
        <div class="row ml-5p">
          <div class="col-sm-6">
            <mat-label class="refcol">Contact No:</mat-label>
          </div>
          <div class="col-sm-6 f-r mt-n7p width-60p">
            <mat-label class="ml-n20p">{{M_MobileNo}}</mat-label>
          </div>
        </div>
      </div>
      <div class="col-sm-2 mt-1p width-22p">
        <div class="row">
          <div class="col-sm-7">
            <div class="row">
              <div class="col-sm-9">
                <mat-label class="refcol">Order No:</mat-label>
              </div>
              <div class="col-sm-3 ml-n25p">
                <mat-icon (click)="PlacedOrderedList()" class="cursor" data-toggle="tooltip" title="Search Ordered List">search</mat-icon>
              </div>
            </div>
          </div>
          <div class="col-sm-5  ml-n20p">
            <mat-label>{{M_OrderNo}}</mat-label>
          </div>
        </div>
        <div class="row mt-1p">
          <div class="col-sm-5 mt-13p width-50p ml-n8p">
            <mat-label class="refcol ml-6p">Order Date:</mat-label>
          </div>
          <div class="col-sm-7 mt-13p ml-n3p">
            <mat-label *ngIf="!Prints" class="mt-12p">{{M_OrderDate | date:'dd-MMM-y'}}</mat-label>
            <mat-label *ngIf="Prints" class="mt-12p ml-n23p">{{M_OrderDate | date:'dd-MMM-y, HH:mm'}}</mat-label>
          </div>
        </div>
      </div>
      <div class="col-sm-2 mt-1p width-22p">
        <div class="row">
          <div class="col-sm-5">
            <mat-label class="refcol">Ref No:</mat-label>
          </div>
          <div class="col-sm-5 mt-n4p ml-n16p width-70p">
            <mat-form-field appearance="outline">
              <mat-label>Ref No</mat-label>
              <input [(ngModel)]="M_RefNo" matInput name="RefNo" type="text" (keypress)="RestrictSymbols($event)">
            </mat-form-field>
          </div>
        </div>
        <div class="row mt-10p">
          <div class="col-sm-5 ml-n3p">
            <mat-label class="refcol ml-n15p">Ref Date:</mat-label>
          </div>
          <div class="col-sm-5 mt-n4p ml-n19p width-80p">
            <mat-form-field appearance="outline">
              <mat-label>Ref Date</mat-label>
              <input [(ngModel)]="M_Refdate" name="Refdate" matInput [matDatepicker]="picker1" [max]="date" placeholder="">
              <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
              <mat-datepicker #picker1></mat-datepicker>
            </mat-form-field>
          </div>
        </div>
      </div>
      <div class="col-sm-2 mt-1p width-22p">
        <div class="row">
          <div class="col-sm-7">
            <mat-label class="refcol  ml-n12p">Prescription Date:</mat-label>
          </div>
          <div class="col-sm-5 f-r mt-n8p width-60p">
            <mat-label class="ml-9p">{{M_PrescriptionDate| date:'dd-MMM-y, HH:mm'}}</mat-label>
          </div>
        </div>
        <div class="row mt-14p">
          <div class="col-sm-7">
            <mat-label class="refcol ml-n24p">Prescription Doctor:</mat-label>
          </div>
          <div class="col-sm-5 f-r mt-n8p width-60p">
            <mat-label class="ml-17p">{{M_PrescribedDoctor}}</mat-label>
          </div>
        </div>
      </div>
    </div>
    <div class="container">
      <input id="tab-1" class="ItemDetailsTab" type="radio" name="tabs" checked="checked" />
      <input id="tab-2" type="radio" name="tabs" />
      <div class="tabs">
        <label for="tab-1">Item Details</label>
        <label for="tab-2">Payment Details</label>
      </div>
      <div class="content">
        <div class="tab  position-sticky width-100p">
          <div class="col-sm-12 mt-1p">
            <div class="mb-12">
              <h5 class="card-header text-white">
                Item Details
                <button *ngIf="!Prints" type="button" (click)="AddItemDetails();" class="btnuserdefined btn-dark"><i matTooltip="Add Items" class="fa fa-plus"></i></button>
              </h5>
              <div class="card-body">
                <div class="row heightAuto-300px  position-sticky" *ngIf="!Prints">
                  <table mat-table matSort [dataSource]="dataSource" class="custom-table withoutbackgroung search-table table-bordered">

                    <ng-container matColumnDef="Type">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Type</th>
                      <td mat-cell *matCellDef="let element ;let i = index;">{{element.Type}}</td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="Types">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Type </th>
                    </ng-container>


                    <ng-container matColumnDef="Brand">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Brand</th>
                      <td mat-cell *matCellDef="let element;let i = index;">
                        <div class="mt-3p">
                          {{element.Brand}}
                          <mat-icon (click)="SearchSelected(i)" class="grab f-r ml-n5p cursor" data-toggle="tooltip" title="Search">search</mat-icon>
                        </div>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="Brands">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-8p"> Brand </th>
                    </ng-container>



                    <ng-container matColumnDef="Description">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Description</th>
                      <td mat-cell *matCellDef="let element ;let i = index;">
                        {{element.Sph}}{{element.Cyl}}{{element.Axis}}{{element.Add}}
                        {{element.FrameShapeID}}{{element.FrameStyleID}}{{element.FrameTypeID}}{{element.FrameWidthID}}
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="Descriptions">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Description </th>
                    </ng-container>



                    <ng-container matColumnDef="UOM">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">UOM</th>
                      <td mat-cell *matCellDef="let element"> {{element.UOM}} </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="UOMs">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> UOM </th>
                    </ng-container>

                    <ng-container matColumnDef="QTY">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">QTY</th>
                      <td mat-cell *matCellDef="let element; let id = index;" class="width-3p text-end">
                        <input (keypress)="RestrictNegativeValues($event)"
                               (keyup)="changeQtyValue(id,'Quantity',$event);changeGivenQtyValue(id,element,'GivenQtyPrice');changeValueDiscountAmount(id,element,'DiscountAmount');changeValueGrossAmount(id,element,'GrossAmount');changeGstValue(id,element);changeValueTotal(id,element,'Amount')"
                               matInput value="{{element.Quantity}}"
                               autocomplete="off">
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="QTYs">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> QTY </th>
                    </ng-container>

                    <ng-container matColumnDef="Price">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Price</th>
                      <td mat-cell *matCellDef="let element; let id = index;" class="text-end">
                        <input (keypress)="RestrictNegativeValues($event)"
                               (keyup)="changePrice(id,'UnitPrice',$event);changeGivenQtyValue(id,element,'GivenQtyPrice');changeValueDiscountAmount(id,element,'DiscountAmount');changeValueGrossAmount(id,element,'GrossAmount');changeGstValue(id,element,'GSTValue');changeValueTotal(id,element,'Amount')"
                               matInput value="{{element.UnitPrice | number : '1.2-2'}}"
                               autocomplete="off">
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="Prices">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" class="width-7p"> Price </th>
                    </ng-container>



                    <ng-container matColumnDef="Amount">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Amount</th>
                      <td mat-cell *matCellDef="let element" class="text-end">{{ element.GivenQtyPrice | number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef class="text-end"><b>{{getItemAmount() | currency:Country2}}</b></td>
                    </ng-container>

                    <ng-container matColumnDef="Amounts">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Amount </th>
                    </ng-container>

                    <ng-container matColumnDef="Discount%">
                      <th mat-header-cell *matHeaderCellDef style="width:4%">%</th>
                      <td mat-cell *matCellDef="let element; let id = index;" class="text-end width-4p">
                        <input (keypress)="RestrictNegativeValues($event)"
                               (keyup)="changeQtyValue1(id,'Discount',$event);changeValueDiscountAmount(id,element,'DiscountAmount');
                                 changeValueGrossAmount(id,element,'GrossAmount');changeGstValue(id,element,'GSTValue');changeValueTotal(id,element,'Amount')"
                               matInput value="{{element.Discount}}"
                               autocomplete="off">
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="DiscountAmount">
                      <th mat-header-cell *matHeaderCellDef> Amount</th>
                      <td mat-cell *matCellDef="let element" class="text-end">{{element.DiscountAmount| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef class="text-end"><b>{{getDiscountAmount() | currency:Country2}}</b></td>
                    </ng-container>


                    <ng-container matColumnDef="GrossAmount">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">GrossAmount</th>
                      <td mat-cell *matCellDef="let element" class="text-end">{{element.GrossAmount| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef class="text-end"><b>{{getGrossAmount() | currency:Country2}}</b></td>
                    </ng-container>


                    <ng-container matColumnDef="GrossAmounts">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Gross Amount</th>
                    </ng-container>


                    <ng-container matColumnDef="CGST">
                      <th mat-header-cell *matHeaderCellDef>%</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.CGST | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="CGSTValue">
                      <th mat-header-cell *matHeaderCellDef> Amount</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.CGSTValue | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef><b>{{GetCGSTAmount() | currency:Country2}}</b> </td>

                    </ng-container>

                    <ng-container matColumnDef="SGST">
                      <th mat-header-cell *matHeaderCellDef>%</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.SGST | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef></td>
                    </ng-container>

                    <ng-container matColumnDef="SGSTValue">
                      <th mat-header-cell *matHeaderCellDef> Amount</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.SGSTValue | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef><b>{{GetSGSTAmount() | currency:Country2}}</b></td>
                    </ng-container>

                    <ng-container matColumnDef="IGST">
                      <th mat-header-cell *matHeaderCellDef>%</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.IGST | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef></td>
                    </ng-container>

                    <ng-container matColumnDef="IGSTValue">
                      <th mat-header-cell *matHeaderCellDef> Amount</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.IGSTValue | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef><b>{{GetIGSTAmount() | currency:Country2}}</b></td>
                    </ng-container>



                    <ng-container matColumnDef="Action">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Action</th>
                      <td mat-cell *matCellDef="let element; let i = index;">
                        <button mat-icon-button>
                          <mat-icon data-toggle="tooltip" title="Drop" class="grab" (click)="element.OneplusOfferValue == null ? Drop(element,i) : DropWithOffers(i)">delete</mat-icon>
                        </button>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>


                    <ng-container matColumnDef="Actions">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Action </th>
                    </ng-container>

                    <ng-container matColumnDef="NetAmount">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Net Amount</th>
                      <td mat-cell *matCellDef="let element" class="text-end">{{element.Amount| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef class="text-end"><b>{{getTotalAmount() | currency:Country2}}</b></td>
                    </ng-container>


                    <ng-container matColumnDef="NetAmounts">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Net Amount</th>
                    </ng-container>

                    <ng-container matColumnDef="header-row-group">
                      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Discount </th>
                    </ng-container>


                    <ng-container matColumnDef="CGSTTax">
                      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> CGST Tax </th>
                    </ng-container>

                    <ng-container matColumnDef="SGSTTax">
                      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> SGST Tax </th>
                    </ng-container>

                    <ng-container matColumnDef="IGSTTax">
                      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> IGST Tax </th>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumnsCombined;sticky: true"></tr>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns;sticky:true"></tr>
                    <tr mat-row *matRowDef="let row;  let even = even;columns: displayedColumns;"></tr>
                    <tr mat-footer-row *matFooterRowDef="displayedColumns;sticky: true"></tr>
                  </table>
                </div>
                <div class="row heightAuto-300px  position-sticky" *ngIf="Prints">
                  <table mat-table matSort [dataSource]="PrintdataSource" class="custom-table withoutbackgroung search-table table-bordered">

                    <ng-container matColumnDef="Type">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Type</th>
                      <td mat-cell *matCellDef="let element ;let i = index;">{{element.Type}}  </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="Types">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Type </th>
                    </ng-container>


                    <ng-container matColumnDef="Brand">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Brand</th>
                      <td mat-cell *matCellDef="let element;let i = index;">
                        {{element.Brand}}
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="Brands">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Brand </th>
                    </ng-container>


                    <ng-container matColumnDef="Description">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Description</th>
                      <td mat-cell *matCellDef="let element ;let i = index;">
                        {{element.Sph}}{{element.Cyl}}{{element.Axis}}{{element.Add}}
                        {{element.FrameShapeID}}{{element.FrameStyleID}}{{element.FrameTypeID}}{{element.FrameWidthID}}
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="Descriptions">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Description </th>
                    </ng-container>



                    <ng-container matColumnDef="UOM">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">UOM</th>
                      <td mat-cell *matCellDef="let element"> {{element.UOM}} </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="UOMs">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> UOM </th>
                    </ng-container>

                    <ng-container matColumnDef="QTY">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">QTY</th>
                      <td mat-cell *matCellDef="let element; let id = index;" class="text-end"> {{element.Quantity}} </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="QTYs">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> QTY </th>
                    </ng-container>

                    <ng-container matColumnDef="Price">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Price</th>
                      <td mat-cell *matCellDef="let element" class="text-end"> {{element.UnitPrice| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="Prices">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Price </th>
                    </ng-container>



                    <ng-container matColumnDef="Amount">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Amount</th>
                      <td mat-cell *matCellDef="let element" class="text-end">{{ element.GivenQtyPrice | number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef class="text-end"><b>{{getItemAmount() | currency:Country2}}</b></td>
                    </ng-container>
                    <ng-container matColumnDef="Amounts">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Amount</th>
                    </ng-container>

                    <ng-container matColumnDef="Discount%">
                      <th mat-header-cell *matHeaderCellDef>%</th>
                      <td mat-cell *matCellDef="let element"> {{element.Discount| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="DiscountAmount">
                      <th mat-header-cell *matHeaderCellDef> Amount</th>
                      <td mat-cell *matCellDef="let element" class="text-end">{{element.DiscountAmount| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef class="text-end"><b>{{getDiscountAmount() | currency:Country2}}</b></td>
                    </ng-container>


                    <ng-container matColumnDef="GrossAmount">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">GrossAmount</th>
                      <td mat-cell *matCellDef="let element" class="text-end">{{element.GrossAmount| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef class="text-end"><b>{{getGrossAmount() | currency:Country2}}</b></td>
                    </ng-container>
                    <ng-container matColumnDef="GrossAmounts">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> GrossAmount </th>
                    </ng-container>

                    <ng-container matColumnDef="CGST">
                      <th mat-header-cell *matHeaderCellDef>%</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.CGST | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="CGSTValue">
                      <th mat-header-cell *matHeaderCellDef> Amount</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.CGSTValue | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef><b>{{GetCGSTAmount() | currency:Country2}}</b> </td>

                    </ng-container>

                    <ng-container matColumnDef="SGST">
                      <th mat-header-cell *matHeaderCellDef>%</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.SGST | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef></td>
                    </ng-container>

                    <ng-container matColumnDef="SGSTValue">
                      <th mat-header-cell *matHeaderCellDef> Amount</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.SGSTValue | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef><b>{{GetSGSTAmount() | currency:Country2}}</b></td>
                    </ng-container>

                    <ng-container matColumnDef="IGST">
                      <th mat-header-cell *matHeaderCellDef>%</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.IGST | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef></td>
                    </ng-container>

                    <ng-container matColumnDef="IGSTValue">
                      <th mat-header-cell *matHeaderCellDef> Amount</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.IGSTValue | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef><b>{{GetIGSTAmount() | currency:Country2}}</b></td>
                    </ng-container>


                    <ng-container matColumnDef="NetAmount">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Net Amount</th>
                      <td mat-cell *matCellDef="let element" class="text-end">{{element.Amount| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef class="text-end"><b>{{getTotalAmount() | currency:Country2}}</b></td>
                    </ng-container>


                    <ng-container matColumnDef="NetAmounts">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Net Amount </th>
                    </ng-container>
                    <ng-container matColumnDef="header-row-group">
                      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Discount </th>
                    </ng-container>
                    <ng-container matColumnDef="CGSTTax">
                      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> CGST Tax </th>
                    </ng-container>
                    <ng-container matColumnDef="SGSTTax">
                      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> SGST Tax </th>
                    </ng-container>

                    <ng-container matColumnDef="IGSTTax">
                      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> IGST Tax </th>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="PrintdisplayedColumnsCombined;sticky: true"></tr>

                    <tr mat-header-row *matHeaderRowDef="PrintdisplayedColumns;sticky:true"></tr>
                    <tr mat-row *matRowDef="let row;  let even = even;columns: PrintdisplayedColumns;"></tr>
                    <tr mat-footer-row *matFooterRowDef="PrintdisplayedColumns;sticky: true"></tr>
                  </table>
                </div>
                <div class="row mt-1p">
                  <div class="col-sm-3" *ngIf="!Prints">
                    <mat-form-field appearance="outline">
                      <mat-label class="refcol">Delivery Date</mat-label>
                      <input [(ngModel)]="M_Deliverydate" name="Deliverydate" matInput [matDatepicker]="picker2" [min]="date" placeholder="">
                      <mat-datepicker-toggle matSuffix [for]="picker2"></mat-datepicker-toggle>
                      <mat-datepicker #picker2></mat-datepicker>
                    </mat-form-field>
                  </div>
                  <div class="col-sm-3" *ngIf="Prints">
                    <div class="col-sm-7">
                      <mat-label class="refcol">Delivery Date:</mat-label>
                    </div>
                    <mat-label *ngIf="Prints" class="mt-12p ml-n13p">{{M_Deliverydate | date:'dd-MMM-y'}}</mat-label>
                  </div>
                  <div class="col-sm-3">
                    <mat-form-field appearance="outline" hintLabel="Max 250 characters">
                      <mat-label class="refcol">Remarks</mat-label>
                      <textarea [(ngModel)]="M_Remarks" name="Remarks" matInput #remark placeholder="Remarks"></textarea>
                      <mat-hint align="end">{{remark.value?.length || 0}}/250</mat-hint>
                    </mat-form-field>
                  </div>
                </div>
                <div class="row mt-1p" *ngIf="hiddenuploadedImage">
                  <div class="col-sm-12">
                    <div class="row width-21p">
                      <h5 class="card-header bg-success text-white">
                        Optical Prescription
                      </h5>
                    </div>
                    <div class="row col-sm-3 mt-1p">
                      <img *ngFor='let uploadedImage of uploadedImages; index as i' [lightbox]="i" [src]="uploadedImage.data.thumb" style="width:70%;">
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="tab  position-sticky width-100p">
          <div class="row mt-1p ml-1p">
            <div class="row" *ngIf="!Prints">
              <div class="col-sm-2">
                <mat-label>Advance Amount:</mat-label>
              </div>
              <div class="col-sm-2 mt-n1p">
                <mat-form-field appearance="outline">
                  <input [(ngModel)]="M_AdvanceAmount" autocomplete="off" (keypress)="RestrictNegativeValues($event)" (keyup)="CheckingAdvanceAmount($event);" matInput name="AdvanceAmount" type="number">
                </mat-form-field>
              </div>
            </div>
          </div>
          <div class="col-sm-12 mt-1p" *ngIf="!Prints">
            <div class="mb-12">
              <h5 class="card-header">
                Payment details
                <button (click)="AddPaymentDetailsNewgrid();" class="btnuserdefined btn-dark"><i matTooltip="Add Payment Details" class="fa fa-plus"></i></button>
              </h5>
              <div class="card-body">
                <div class="row" heightAuto-300px>
                  <table mat-table [dataSource]="dataSource3" class="custom-table withoutbackgroung search-table table-bordered">

                    <ng-container matColumnDef="PaymentMode">
                      <th mat-header-cell *matHeaderCellDef>Payment Mode</th>
                      <td mat-cell *matCellDef="let element;let id = index;">
                        <mat-form-field appearance="outline">
                          <mat-select (selectionChange)="PaymentChange(id,$event,element)">
                            <mat-option *ngFor="let Paymentsmode of Paymentsmodes" [value]="Paymentsmode.Value">
                              {{Paymentsmode.Text}}
                            </mat-option>
                          </mat-select>
                        </mat-form-field>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="BankName">
                      <th mat-header-cell *matHeaderCellDef>Bank Name</th>
                      <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'">
                        <mat-form-field appearance="outline">
                          <input (blur)="BankName($event,element)" (keypress)="nameField($event)" [disabled]="element.PaymentMode =='Cash'  " maxlength="100" matInput placeholder="Enter BankName" name="BankName" type="text">
                        </mat-form-field>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="InstrumentNumber">
                      <th mat-header-cell *matHeaderCellDef>Instrument Number</th>
                      <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'">
                        <mat-form-field appearance="outline">
                          <input (blur)="InstrumentNumber($event,element)" [disabled]="element.PaymentMode =='Cash'" maxlength="15" (keypress)="numberOnly($event)" matInput placeholder="Enter Instrument Number" name="InstrumentNumber" type="text">
                        </mat-form-field>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="InstrumentDate">
                      <th mat-header-cell *matHeaderCellDef>Instrument Date</th>
                      <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash' || element.PaymentMode !='Debit card'|| element.PaymentMode !='Credit Card'">
                        <mat-form-field appearance="outline">
                          <input [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card'|| element.PaymentMode =='Credit Card' "
                                 name="InstrumentDate" autocomplete="off" [min]="maxToDate" matInput [matDatepicker]="InstrumentDate" (dateChange)="dateofinstrument($event,element)" placeholder="InstrumentDate">
                          <mat-datepicker-toggle matSuffix [for]="InstrumentDate"></mat-datepicker-toggle>
                          <mat-datepicker #InstrumentDate></mat-datepicker>
                        </mat-form-field>
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="ExpiryDate">
                      <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
                      <td mat-cell *matCellDef="let element" [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Demand Draft' ">
                        <mat-form-field appearance="outline">
                          <input (dateChange)="dateexpiry($event,element)" [disabled]="element.PaymentMode =='Cash'|| element.PaymentMode =='Demand Draft' " autocomplete="off" [min]="MINExpiryDate"
                                 name="ExpiryDate" matInput [matDatepicker]="ExpiryDate" placeholder="ExpiryDate" type="datetime">
                          <mat-datepicker-toggle matSuffix [for]="ExpiryDate"></mat-datepicker-toggle>
                          <mat-datepicker #ExpiryDate></mat-datepicker>
                        </mat-form-field>
                      </td>
                      <td mat-footer-cell *matFooterCellDef><b>Total</b></td>
                    </ng-container>
                    <ng-container matColumnDef="Branch">
                      <th mat-header-cell *matHeaderCellDef>Branch</th>
                      <td mat-cell *matCellDef="let element"
                          [contentEditable]="element.PaymentMode !='Cash'|| element.PaymentMode !='Debit card' || element.PaymentMode !='Credit Card'">
                        <mat-form-field appearance="outline">
                          <input (blur)="Branch($event,element)"
                                 [disabled]="element.PaymentMode =='Cash' || element.PaymentMode =='Debit card' || element.PaymentMode =='Credit Card'"
                                 (keypress)="nameField($event)" maxlength="50" matInput name="Branch" placeholder="Branch" type="text">
                        </mat-form-field>

                      </td>
                      <td mat-footer-cell *matFooterCellDef></td>
                    </ng-container>
                    <ng-container matColumnDef="Amount">
                      <th mat-header-cell *matHeaderCellDef>Amount</th>
                      <td mat-cell *matCellDef="let element;let id = index" required (keyup)="Amount(id,'Amount',$event,element)" (keypress)="numberOnly($event)" [contentEditable]="disableRow">
                        {{element.Amount | number :'1.2-2'}}

                      </td>
                      <td mat-footer-cell *matFooterCellDef>
                        <strong>
                          {{PTotalAmount1() | currency:Country2}}
                        </strong>
                      </td>
                    </ng-container>
                    <ng-container matColumnDef="Action">
                      <th mat-header-cell *matHeaderCellDef>Action</th>
                      <td mat-cell *matCellDef="let element;let id = index" [contentEditable]="disableRow">
                        <i class="fas fa-trash-alt icon-delete" title="Delete" (click)="removePaytype(i)"></i>
                      </td>
                      <td mat-footer-cell *matFooterCellDef></td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns3;sticky: true"></tr>
                    <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumns3"></tr>
                    <tr mat-footer-row *matFooterRowDef="displayedColumns3;"></tr>
                  </table>
                </div>
              </div>
            </div>
          </div>
          <div class="col-sm-12 heightAuto-200px" *ngIf="Prints">
            <table mat-table matSort [dataSource]="dataSource3" class="custom-table withoutbackgroung search-table table-bordered">
              <ng-container matColumnDef="PaymentMode">
                <th mat-header-cell *matHeaderCellDef>PaymentMode</th>
                <td mat-cell *matCellDef="let element">{{element.PaymentMode}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="InstrumentNumber">
                <th mat-header-cell *matHeaderCellDef>Instrument Number</th>
                <td mat-cell *matCellDef="let element">{{element.InstrumentNumber}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="InstrumentDate">
                <th mat-header-cell *matHeaderCellDef>Instrument Date</th>
                <td mat-cell *matCellDef="let element">{{element.Instrumentdate| date:'dd-MMM-y'}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="BankName">
                <th mat-header-cell *matHeaderCellDef>Bank Name</th>
                <td mat-cell *matCellDef="let element">{{element.BankName}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="Branch">
                <th mat-header-cell *matHeaderCellDef>Branch</th>
                <td mat-cell *matCellDef="let element">{{element.BankBranch}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="ExpiryDate">
                <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
                <td mat-cell *matCellDef="let element">{{element.Expirydate| date:'dd-MMM-y'}} </td>
                <td mat-footer-cell *matFooterCellDef><strong>Total Amount</strong> </td>
              </ng-container>
              <ng-container matColumnDef="Amount">
                <th mat-header-cell *matHeaderCellDef>Amount</th>
                <td mat-cell *matCellDef="let element">{{element.Amount | number : '1.2-2'}} </td>
                <td mat-footer-cell *matFooterCellDef><strong>{{getPaymentTotalCost() | number : '1.2-2'}}</strong> </td>
              </ng-container>
              <ng-container matColumnDef="Action">
                <th mat-header-cell *matHeaderCellDef> Action </th>
                <td mat-cell *matCellDef="let element; let i = index;"> <mat-icon class="grab" data-toggle="tooltip" title="Edit" (click)="EditPaytype(i,element)">create</mat-icon> &nbsp;&nbsp;&nbsp;&nbsp;<mat-icon class="grab" data-toggle="tooltip" title="Drop" (click)="removePaytype(i)">delete</mat-icon>  </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumns3;sticky: true"></tr>
              <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumns3" [ngClass]="{gray: even}"></tr>
              <tr mat-footer-row *matFooterRowDef="displayedColumns3;sticky: true"></tr>
            </table>
          </div>
        </div>
      </div>
    </div>
    <div class="col-sm-12 m-3">
      <div class="col-sm-12 pb25 ml-12p">
        <div class="col-sm-4  sub-section btn-wrap f-r">
          <button type="button" class="btn btn-warning-default" (click)="clear()"><strong>Cancel</strong></button>
          <button *ngIf="Prints" [disabled]="isNextPrint" class="success btn btn-primary" (click)="Print()"> Print </button>
          <button *ngIf="!Prints" [disabled]="isNextButton" class="success btn btn-primary" (click)="Submit()">Submit</button>
        </div>
      </div>
    </div>
  </div>
</form>


<!--/* Adding Item Popup */-->
<div class="modal" role="dialog" [ngStyle]="{'display':FrameModel}">
  <div class="modal-dialog  modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="FrameModelClose()">&times;</button>
        <h6 class="modal-title">Item Details</h6>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label>Search</mat-label>
              <input matInput (keyup)="applyFilter($event)" placeholder="">
            </mat-form-field>
          </div>
        </div>
        <div class="row heightAuto-300px">
          <table mat-table matSort [dataSource]="dataSource1" class="custom-table withoutbackgroung search-table table-bordered">
            <ng-container matColumnDef="Action">
              <th mat-header-cell *matHeaderCellDef>Action</th>
              <td mat-cell *matCellDef="let element">
                <mat-checkbox [(ngModel)]="element.checked" (click)="selecttype(element)"></mat-checkbox>
              </td>
            </ng-container>
            <ng-container matColumnDef="Type">
              <th mat-header-cell *matHeaderCellDef>Type</th>
              <td mat-cell *matCellDef="let element">{{element.Type}}</td>
            </ng-container>
            <ng-container matColumnDef="Brand">
              <th mat-header-cell *matHeaderCellDef>Brand</th>
              <td mat-cell *matCellDef="let element ;let i = index;">{{element.Brand}}</td>
            </ng-container>
            <ng-container matColumnDef="Description">
              <th mat-header-cell *matHeaderCellDef>Description</th>
              <td mat-cell *matCellDef="let element ;let i = index;">
                {{element.Sph}}{{element.Cyl}}{{element.Axis}}{{element.Add}}
                {{element.FrameShapeID}}{{element.FrameStyleID}}{{element.FrameTypeID}}{{element.FrameWidthID}}
              </td>
            </ng-container>
            <ng-container matColumnDef="Price">
              <th mat-header-cell *matHeaderCellDef>Price</th>
              <td mat-cell *matCellDef="let element"> {{element.ActualPrice | number:'1.2-2'}} </td>
            </ng-container>
            <ng-container matColumnDef="Stockqty">
              <th mat-header-cell *matHeaderCellDef>Stock qty</th>
              <td mat-cell *matCellDef="let element"> {{element.Stockqty | number:'1.2-2'}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns1;sticky:true"></tr>
            <tr mat-row *matRowDef="let row;  let even = even;columns: displayedColumns1;"></tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!--/* Offer Details Popup */-->
<div class="modal" role="dialog" [ngStyle]="{'display':OfferModel}">
  <div class="modal-dialog modal-lg width-90p pt15 ml-n2p padding-lef15p">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="OfferModelClose()">&times;</button>
        <h6 class="modal-title">Offer Item Details</h6>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label>Search</mat-label>
              <input matInput (keyup)="applyFilter1($event)" placeholder="">
            </mat-form-field>
          </div>
          <div class="col-sm-3 marg-12 mt-1p">
            <mat-label>Offer Value : {{OfferValue}}</mat-label>
          </div>
          <div class="col-sm-3 marg-12 mt-1p">
            <mat-label>Remaining Items : {{RemainingItems}}</mat-label>
          </div>
        </div>
        <div class="row heightAuto-300px">
          <table #myTable mat-table matSort [dataSource]="dataSource2" class="custom-table withoutbackgroung search-table table-bordered">
            <ng-container matColumnDef="Brand">
              <th mat-header-cell *matHeaderCellDef>Brand</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.Brand}}</td>
            </ng-container>
            <ng-container matColumnDef="LensOptions">
              <th mat-header-cell *matHeaderCellDef>LensOptions</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.LensOptions}} </td>
            </ng-container>
            <ng-container matColumnDef="Description">
              <th mat-header-cell *matHeaderCellDef>Description</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.Description}} </td>
            </ng-container>
            <ng-container matColumnDef="Model">
              <th mat-header-cell *matHeaderCellDef>Model</th>
              <td mat-cell *matCellDef="let element"> {{element.Model}} </td>
            </ng-container>
            <ng-container matColumnDef="Index">
              <th mat-header-cell *matHeaderCellDef>Index</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.Index}} </td>
            </ng-container>
            <ng-container matColumnDef="Color">
              <th mat-header-cell *matHeaderCellDef>Color</th>
              <td mat-cell *matCellDef="let element"> {{element.Color}} </td>
            </ng-container>
            <ng-container matColumnDef="Size">
              <th mat-header-cell *matHeaderCellDef>Size</th>
              <td mat-cell *matCellDef="let element"> {{element.Size}} </td>
            </ng-container>
            <ng-container matColumnDef="Quantity">
              <th mat-header-cell *matHeaderCellDef>Quantity</th>
              <td mat-cell *matCellDef="let element;let id = index;" contenteditable="true" (keypress)="RestrictNegativeValues($event)" (keyup)="changeValue(id,'Quantity',$event)"> {{element.Quantity}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="displayedColumns2;sticky:true"></tr>
            <tr mat-row *matRowDef="let row;  let even = even;columns: displayedColumns2;" [ngClass]="{gray: even}"></tr>
          </table>
        </div>
        <div class="row">
          <div class="col-sm-3"></div>
          <div class="col-sm-3"></div>
          <div class="col-sm-2 ml-n8p mt-n6p">
            <button type="button" data-dismiss="modal" (click)="OfferValueCheck()">Ok</button>
          </div>
          <div class="col-sm-1"></div>
        </div>
      </div>
    </div>
  </div>
</div>


<!--/* Ordered List Popup */-->
<div class="modal" role="dialog" [ngStyle]="{'display':OrderedListModel}">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="OrderedListModelClose()">&times;</button>
        <h6 class="modal-title">Customer Order Details</h6>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label>Search</mat-label>
              <input matInput (keyup)="applyFilter2($event)" placeholder="">
            </mat-form-field>
          </div>
        </div>
        <div class="row heightAuto-300px">
          <table mat-table matSort [dataSource]="dataSource4" class="custom-table withoutbackgroung search-table table-bordered">
            <ng-container matColumnDef="Action">
              <th mat-header-cell *matHeaderCellDef>Action</th>
              <td mat-cell *matCellDef="let element; let i = index;">
                <mat-icon class="cursor" data-toggle="tooltip" title="select" (click)="SelectOrderNo(element)">create</mat-icon>
              </td>
            </ng-container>
            <ng-container matColumnDef="OrderNo">
              <th mat-header-cell *matHeaderCellDef>Order No</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.OrderNo}}</td>
            </ng-container>
            <ng-container matColumnDef="OrderDate">
              <th mat-header-cell *matHeaderCellDef>Order Date</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.OrderDate | date:'dd-MMM-y'}} </td>
            </ng-container>
            <ng-container matColumnDef="CustomerName">
              <th mat-header-cell *matHeaderCellDef>Customer Name</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.CustomerName}} </td>
            </ng-container>
            <ng-container matColumnDef="OrderStatus">
              <th mat-header-cell *matHeaderCellDef>Order Status</th>
              <td mat-cell *matCellDef="let element"> {{element.OrderStatus}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns4;sticky:true"></tr>
            <tr mat-row *matRowDef="let row;  let even = even;columns: displayedColumns4;" [ngClass]="{gray: even}"></tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>


<!--Print-->
<div id="section" style="display:none">
  <div class="col-sm-12">
    <div class="row">
      <div class="col-sm-3"></div>
      <div class="col-sm-6">
        <div style="text-align:center"><strong>{{CompanyName}}</strong></div>
        <div style="text-align:center"><strong>{{CompanyAddress1 + ' '+ CompanyAddress2 + ' '+ CompanyAddress3}}</strong></div>
        <div style="text-align:center"><strong>Phone No:{{CompanyPhone1}} &nbsp; Website:{{CompanyWebsite}}</strong></div>
        <div style="text-align:center"><strong>Customer Order</strong></div>
      </div>
      <div class="col-sm-3"></div>
    </div>
  </div>
  <div class="col-sm-12 row">
    <div class="col-sm-4">
      <div class="row">
        <div class="col-sm-5">
          <div class="row">
            <mat-label><b>Order No</b></mat-label>
          </div>
        </div>

        <div class="col-sm-7">
          <mat-label>:&nbsp;</mat-label>
          <mat-label>{{M_OrderNo}}</mat-label>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-5">
          <div class="row">
            <mat-label><b>Order Date</b></mat-label>
          </div>
        </div>
        <div class="col-sm-7">
          <mat-label>:&nbsp;</mat-label>
          <mat-label>{{M_OrderDate | date:'dd-MMM-y, HH:mm'}}</mat-label>Hrs
        </div>
      </div>

    </div>


    <div class="col-sm-4">

      <div class="row">
        <div class="col-sm-5">
          <div class="row">
            <mat-label><b>Ref No</b></mat-label>
          </div>
        </div>

        <div class="col-sm-7">
          <mat-label>:&nbsp;</mat-label>
          <mat-label>{{M_RefNo}}</mat-label>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-5">
          <div class="row">
            <mat-label><b>Ref Date</b></mat-label>
          </div>
        </div>
        <div class="col-sm-7">
          <mat-label>:&nbsp;</mat-label>
          <mat-label>{{M_Refdate | date:'dd-MMM-y'}}</mat-label>
        </div>
      </div>

    </div>
    <div class="col-sm-4">

      <div class="row">
        <div class="col-sm-5">
          <div class="row">
            <mat-label><b>Customer Name</b></mat-label>
          </div>
        </div>
        <div class="col-sm-7">
          <mat-label>:&nbsp;</mat-label>
          <mat-label>{{M_CustomerName}}</mat-label>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-5">
          <div class="row">
            <mat-label><b>Address</b></mat-label>
          </div>
        </div>
        <div class="col-sm-7">
          <mat-label>:&nbsp;</mat-label>
          <mat-label>{{M_Address}}</mat-label>
        </div>
      </div>

      <div class="row">
        <div class="col-sm-5">
          <div class="row">
            <mat-label><b>Contact No</b></mat-label>
          </div>
        </div>
        <div class="col-sm-7">
          <mat-label>:&nbsp;</mat-label>
          <mat-label>{{M_MobileNo}}</mat-label>
        </div>
      </div>

    </div>
  </div>







  <div class="col-sm-12" style="margin-top:2%">
    <div class="row">
      <div class="col-sm-6">
        <label style="text-align:center;margin-left:2%"><strong>Item Details :</strong></label>
      </div>
    </div>
    <div class="row">
      <table mat-table matSort [dataSource]="PrintdataSource" class="custom-table withoutbackgroung search-table table-bordered" style="width: 100%;">
        <ng-container matColumnDef="Type">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Type</th>
          <td mat-cell *matCellDef="let element ;let i = index;">{{element.Type}}  </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>

        <ng-container matColumnDef="Types">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="width: 4%;"> Type </th>
        </ng-container>


        <ng-container matColumnDef="Brand">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}" style="width: 2%;">Brand</th>
          <td mat-cell *matCellDef="let element;let i = index;" style="width: 9%;word-break: break-word;">
            {{element.Brand}}
          </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>


        <ng-container matColumnDef="Brands">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="width: 2%;"> Brand </th>
        </ng-container>

        <ng-container matColumnDef="Description">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Description</th>
          <td mat-cell *matCellDef="let element ;let i = index;">
            {{element.Sph}}{{element.Cyl}}{{element.Axis}}{{element.Add}}
            {{element.FrameShapeID}}{{element.FrameStyleID}}{{element.FrameTypeID}}{{element.FrameWidthID}}
          </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>
        <ng-container matColumnDef="Descriptions">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Description </th>
        </ng-container>




        <ng-container matColumnDef="UOM">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">UOM</th>
          <td mat-cell *matCellDef="let element"> {{element.UOM}} </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>

        <ng-container matColumnDef="UOMs">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="width: 5%;"> UOM </th>
        </ng-container>

        <ng-container matColumnDef="QTY">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">QTY</th>
          <td mat-cell *matCellDef="let element; let id = index;" contenteditable="true" (keypress)="RestrictNegativeValues($event)" (keyup)="changeQtyValue(id,'Quantity',$event);changeGivenQtyValue(id,element,'GivenQtyPrice');changeValueDiscountAmount(id,element,'DiscountAmount');changeValueGrossAmount(id,element,'GrossAmount');changeGstValue(id,element,'GSTValue');changeValueTotal(id,element,'Amount')"> {{element.Quantity| number : '1.2-2'}} </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>

        <ng-container matColumnDef="QTYs">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="width: 3%;"> QTY </th>
        </ng-container>

        <ng-container matColumnDef="Price">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Price</th>
          <td mat-cell *matCellDef="let element" style="text-align:end"> {{element.UnitPrice| number : '1.2-2'}} </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>

        <ng-container matColumnDef="Prices">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="width:5%;"> Price </th>
        </ng-container>



        <ng-container matColumnDef="Amount">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">
            Amount
          </th>
          <td mat-cell *matCellDef="let element" style="text-align:end">{{ element.GivenQtyPrice | number : '1.2-2'}} </td>
          <td mat-footer-cell *matFooterCellDef style="text-align:end"><b>{{getItemAmount() | currency:Country2}}</b></td>
        </ng-container>

        <ng-container matColumnDef="Amounts">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="width:5%;">
            Amount
          </th>
        </ng-container>

        <ng-container matColumnDef="Discount%">
          <th mat-header-cell *matHeaderCellDef style="width: 3%;">%</th>
          <td mat-cell *matCellDef="let element"> {{element.Discount| number : '1.2-2'}} </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>
        <ng-container matColumnDef="DiscountAmount">
          <th mat-header-cell *matHeaderCellDef style="width: 5%;"> Amount</th>
          <td mat-cell *matCellDef="let element" style="text-align:end">{{element.DiscountAmount| number : '1.2-2'}} </td>
          <td mat-footer-cell *matFooterCellDef style="text-align:end"><b>{{getDiscountAmount() | currency:Country2}}</b></td>
        </ng-container>


        <ng-container matColumnDef="GrossAmount">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}" style="background-color:#F0F3F5;color:#8FA3B0;font-family:'Proxima Nova Semibold';font-size:14px;height:40px">
            GrossAmount
          </th>
          <td mat-cell *matCellDef="let element" style="text-align:end">{{element.GrossAmount| number : '1.2-2'}} </td>
          <td mat-footer-cell *matFooterCellDef style="text-align:end"><b>{{getGrossAmount() | currency:Country2}}</b></td>
        </ng-container>


        <ng-container matColumnDef="GrossAmounts">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="width: 6%;">
            Gross Amount
          </th>
        </ng-container>


        <ng-container matColumnDef="CGST">
          <th mat-header-cell *matHeaderCellDef>%</th>
          <td mat-cell *matCellDef="let element;let id = index;">{{element.CGST | number : '1.2-2'}}</td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>

        <ng-container matColumnDef="CGSTValue">
          <th mat-header-cell *matHeaderCellDef> Amount</th>
          <td mat-cell *matCellDef="let element;let id = index;">{{element.CGSTValue | number : '1.2-2'}}</td>
          <td mat-footer-cell *matFooterCellDef><b>{{GetCGSTAmount() | currency:Country2}}</b> </td>

        </ng-container>

        <ng-container matColumnDef="SGST">
          <th mat-header-cell *matHeaderCellDef>%</th>
          <td mat-cell *matCellDef="let element;let id = index;">{{element.SGST | number : '1.2-2'}}</td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="SGSTValue">
          <th mat-header-cell *matHeaderCellDef> Amount</th>
          <td mat-cell *matCellDef="let element;let id = index;">{{element.SGSTValue | number : '1.2-2'}}</td>
          <td mat-footer-cell *matFooterCellDef><b>{{GetSGSTAmount() | currency:Country2}}</b></td>
        </ng-container>

        <ng-container matColumnDef="IGST">
          <th mat-header-cell *matHeaderCellDef>%</th>
          <td mat-cell *matCellDef="let element;let id = index;">{{element.IGST | number : '1.2-2'}}</td>
          <td mat-footer-cell *matFooterCellDef></td>
        </ng-container>

        <ng-container matColumnDef="IGSTValue">
          <th mat-header-cell *matHeaderCellDef> Amount</th>
          <td mat-cell *matCellDef="let element;let id = index;">{{element.IGSTValue | number : '1.2-2'}}</td>
          <td mat-footer-cell *matFooterCellDef><b>{{GetIGSTAmount() | currency:Country2}}</b></td>
        </ng-container>

        <ng-container matColumnDef="NetAmount">
          <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Net Amount</th>
          <td mat-cell *matCellDef="let element" style="text-align:end">{{element.Amount | currency:Country2}} </td>
          <td mat-footer-cell *matFooterCellDef style="text-align:end"><b>{{getTotalAmount() | currency:Country2}}</b></td>
        </ng-container>


        <ng-container matColumnDef="NetAmounts">
          <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2" style="width: 8%;">
            Net Amount
          </th>
        </ng-container>

        <ng-container matColumnDef="header-row-group">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Discount </th>
        </ng-container>

        <ng-container matColumnDef="CGSTTax">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> CGST Tax </th>
        </ng-container>
        <ng-container matColumnDef="SGSTTax">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> SGST Tax </th>
        </ng-container>

        <ng-container matColumnDef="IGSTTax">
          <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> IGST Tax </th>
        </ng-container>


        <tr mat-header-row *matHeaderRowDef="PrintdisplayedColumnsCombined"></tr>
        <tr mat-header-row *matHeaderRowDef="PrintdisplayedColumns;sticky:true"></tr>
        <tr mat-row *matRowDef="let row;  let even = even;columns: PrintdisplayedColumns;"></tr>
        <tr mat-footer-row *matFooterRowDef="PrintdisplayedColumns;sticky: true"></tr>
      </table>
    </div>
    <div class="row">
      <mat-label>
        <strong>Amount in Words :</strong> &nbsp;&nbsp;{{Country1}} {{transformValue(getTotalAmount())}} only
      </mat-label><br />
    </div>
    <div class="row">
      <div class="col-sm-4">
        <div class="row">
          <div class="col-sm-6">
            <mat-label><strong>Delivery Date: </strong></mat-label> &nbsp;&nbsp;:
          </div>
          <div class="col-sm-6" style="margin-left:-5%">
            <mat-label>{{M_Deliverydate | date:'dd-MMM-y'}}</mat-label>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="row">
          <div class="col-sm-6">
            <mat-label><strong>Remarks: </strong></mat-label> &nbsp;&nbsp;:
          </div>
          <div class="col-sm-6" style="margin-left:-12%">
            <mat-label>{{M_Remarks}}</mat-label>
          </div>
        </div>
      </div>
    </div>


  </div>
  <div class="col-sm-12" style="margin-top:2%" *ngIf="NoPayment">
    <div class="row">
      <div class="col-sm-6">
        <label style="text-align:center;margin-left:2%"><strong>Payment Details :</strong></label>
      </div>
    </div>
    <div class="row">

      <div class="col-sm-4">
        <div class="row">
          <div class="col-sm-6">
            <mat-label><strong>Receipt No</strong></mat-label> &nbsp;&nbsp;:
          </div>
          <div class="col-sm-6" style="margin-left:-2%">
            <mat-label style="margin-left:-20%">{{M_ReceiptNo}}</mat-label>
          </div>
        </div>
      </div>
      <div class="col-sm-6">
        <div class="row">
          <div class="col-sm-6">
            <mat-label> <strong>Receipt Date</strong></mat-label>&nbsp;:
          </div>
          <div class="col-sm-6" style="margin-left:-12%">
            <mat-label style="margin-left:-20%">{{M_ReceiptNoDate | date:'dd-MMM-y, HH:mm'}}</mat-label> &nbsp; Hrs
          </div>
        </div>
      </div>

    </div>

    <div class="row">
      <table mat-table matSort [dataSource]="dataSource3" class="custom-table withoutbackgroung search-table table-bordered" style="width:100%;">

        <ng-container matColumnDef="PaymentMode">
          <th mat-header-cell *matHeaderCellDef>PaymentMode</th>
          <td mat-cell *matCellDef="let element">{{element.PaymentMode}}</td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>

        <ng-container matColumnDef="InstrumentNumber">
          <th mat-header-cell *matHeaderCellDef>Instrument Number</th>
          <td mat-cell *matCellDef="let element">{{element.InstrumentNumber}} </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>

        <ng-container matColumnDef="InstrumentDate">
          <th mat-header-cell *matHeaderCellDef>Instrument Date</th>
          <td mat-cell *matCellDef="let element">{{element.Instrumentdate| date:'dd-MMM-y'}} </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>

        <ng-container matColumnDef="BankName">
          <th mat-header-cell *matHeaderCellDef>Bank Name</th>
          <td mat-cell *matCellDef="let element">{{element.BankName}} </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>

        <ng-container matColumnDef="Branch">
          <th mat-header-cell *matHeaderCellDef>Branch</th>
          <td mat-cell *matCellDef="let element">{{element.BankBranch}} </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>

        <ng-container matColumnDef="ExpiryDate">
          <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
          <td mat-cell *matCellDef="let element">{{element.Expirydate| date:'dd-MMM-y'}} </td>
          <td mat-footer-cell *matFooterCellDef><strong>Total Amount</strong> </td>
        </ng-container>

        <ng-container matColumnDef="Amount">
          <th mat-header-cell *matHeaderCellDef>
            Amount
          </th>
          <td mat-cell *matCellDef="let element">{{element.Amount | number : '1.2-2'}} </td>
          <td mat-footer-cell *matFooterCellDef><strong>{{getPaymentTotalCost() | currency:Country2}}</strong> </td>
        </ng-container>

        <ng-container matColumnDef="Action">
          <th mat-header-cell *matHeaderCellDef> Action </th>
          <td mat-cell *matCellDef="let element; let i = index;"> <mat-icon data-toggle="tooltip" class="grab" title="Select" (click)="EditPaytype(i,element)">create</mat-icon> &nbsp;&nbsp;&nbsp;&nbsp;<mat-icon data-toggle="tooltip" title="Select" class="grab" (click)="removePaytype(i)" style="color:red">delete</mat-icon>  </td>
          <td mat-footer-cell *matFooterCellDef> </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns3;sticky: true"></tr>
        <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumns3" [ngClass]="{gray: even}"></tr>
        <tr mat-footer-row *matFooterRowDef="displayedColumns3;sticky: true"></tr>
      </table>
    </div>
  </div>
  <div class="col-sm-12" style="margin-top: 5%">
    <div class="row">

      <div class="col-sm-4"></div>
      <div class="col-sm-4"></div>
      <div class="col-sm-4" style="text-align:right">
        <mat-label><strong>Authorized Signatory &nbsp;</strong></mat-label>
      </div>
    </div>

  </div>
</div>


<div class="modal" role="dialog" [ngStyle]="{'display':Submitprint}">
  <div class="example-box">
    <div class="modal-dialog modal-md">
      <div class="modal-content">
        <div class="modal-header">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-11">
                <h6 class="modal-title">Information</h6>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-body">
          <div class="col-sm-12">
            <div class="row">
              <div class="col-sm-1">
              </div>
              <div class="col-sm-10">
                <p><strong> Do you want to Print ?</strong></p>
              </div>
              <div class="col-sm-1">
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button (click)="Print()" class="btn btn-primary">Yes</button>
          <button type="button" class="btn btn-success" data-dismiss="modal" (click)="printclose()" cdkFocusInitial>No</button>
        </div>
      </div>
    </div>
  </div>
</div>


<!----*Access Popup*---->
<div class="modal" role="dialog" [ngStyle]="{'display':accesspopup1}">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="modalcloseAccessOk()">&times;</button>
        <h4 class="modal-title">Customer Order - View Access</h4>
      </div>
      <div class="modal-body">
        <table align="center" class=" table custom-table">
          <thead>
            <tr>
              <th>Add</th>
              <th>Edit</th>
              <th>Delete</th>
              <th>Export</th>
              <th>Print</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let x of accessdata; index as i">
              <td><mat-checkbox [(checked)]="x.Add" disabled></mat-checkbox></td>
              <td><mat-checkbox [(checked)]="x.Edit" disabled></mat-checkbox></td>
              <td><mat-checkbox [(checked)]="x.Delete" disabled></mat-checkbox></td>
              <td><mat-checkbox [(checked)]="x.Export" disabled></mat-checkbox></td>
              <td><mat-checkbox [(checked)]="x.Print" disabled></mat-checkbox></td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="modal-footer">
        <button class="btn btn-success" data-dismiss="modal" autofocus (click)="modalcloseAccessOk()">Ok</button>
      </div>
    </div>
  </div>
</div>


<!--/* Prescription list Popup */-->
<div class="modal" role="dialog" [ngStyle]="{'display':PrescriptionlistModel}">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="PrescriptionlistModelClose()">&times;</button>
        <h6 class="modal-title">Optical Prescription List Details</h6>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label>Search</mat-label>
              <input matInput (keyup)="PrescriptionFilter($event)" placeholder="">
            </mat-form-field>
          </div>
        </div>
        <div class="row heightAuto-300px">
          <table mat-table matSort [dataSource]="PrescriptionSource" class="custom-table withoutbackgroung search-table table-bordered">
            <!--<ng-container matColumnDef="UIN">
    <th mat-header-cell *matHeaderCellDef>UIN</th>
    <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.UIN}}</td>
  </ng-container>-->
            <ng-container matColumnDef="PrescriptionDate">
              <th mat-header-cell *matHeaderCellDef>Prescription Date</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.PrescriptionDate | date:'dd-MMM-y, HH:mm'}} </td>
            </ng-container>
            <ng-container matColumnDef="CustomerName">
              <th mat-header-cell *matHeaderCellDef>Customer Name</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.Name}} </td>
            </ng-container>
            <ng-container matColumnDef="MobileNo">
            <th mat-header-cell *matHeaderCellDef>Phone</th>
            <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.MobileNo}} </td>
            </ng-container>
            <tr mat-header-row *matHeaderRowDef="PrescriptionColumns;sticky:true"></tr>
            <tr mat-row *matRowDef="let row; let element;  let even = even;columns: PrescriptionColumns;" class="cursor" (click)="selectPrescription(element)"></tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>

<!--/* Prescription  Popup */-->
<div class="modal" role="dialog" [ngStyle]="{'display':PrescriptionModel}">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="PrescriptionModelClose()">&times;</button>
        <h6 class="modal-title">Optical Prescription</h6>
      </div>
      <div class="modal-body">
        <div class="row m-3">
          <div class="row heightAuto-150px">
            <table class="custom-table vawithoutbackgroung search-table table-bordered">
              <tr>
                <th colspan="6">OD</th>
                <th colspan="6">OS</th>
                <th rowspan="3">BPD</th>
                <th colspan="2">MPD</th>
                <th rowspan="3">Remarks</th>
                <th rowspan="3">Action</th>
              </tr>
              <tr>
                <th colspan="4">Distance Vision</th>
                <th colspan="2">Near Vision</th>
                <th colspan="4">Distance Vision</th>
                <th colspan="2">Near Vision</th>
                <th colspan="1" class="acc">OD</th>
                <th colspan="1" class="acc">OS</th>
              </tr>
              <tr>
                <th>SPH</th>
                <th>CYL</th>
                <th>AXIS</th>
                <th>V/A</th>
                <th>SPH</th>
                <th>V/A</th>
                <th>SPH</th>
                <th>CYL</th>
                <th>AXIS</th>
                <th>V/A</th>
                <th>SPH</th>
                <th>V/A</th>
                <th colspan="1" class="accw"></th>
                <th colspan="1"></th>
              </tr>
              <tbody>
                <tr >
                  <!--<td>{{x.DistSph}}</td>
  <td>{{x.NearCyl}}</td>
  <td>{{x.PinAxis}}</td>
  <td>{{x.Add}}</td>
  <td>{{x.DistSphNVOD}}</td>
  <td>{{x.AddNVOD}}</td>
  <td>{{x.DistSphOS}}</td>
  <td>{{x.NearCylOS}}</td>
  <td>{{x.PinAxisOS}}</td>
  <td>{{x.AddOS}}</td>
  <td>{{x.DistSphNVOS}}</td>
  <td>{{x.AddNVOS}}</td>
  <td>{{x.PD}}</td>
  <td>{{x.MPDOD}}</td>
  <td>{{x.MPDOS}}</td>
  <td>{{x.Remarks}}</td>-->
                  <td>{{SPHACC1}}</td>
                  <td>{{CYLACC1}}</td>
                  <td>{{AXISACC1}}</td>
                  <td>{{VA}}</td>
                  <td>{{SPHNV1}}</td>
                  <td>{{VANVV}}</td>
                  <td>{{SPHTAN1}}</td>
                  <td>{{CYLTAN1}}</td>
                  <td>{{AXISTAN1}}</td>
                  <td>{{VATANA1}}</td>
                  <td>{{SPHNVR1}}</td>
                  <td>{{VANVRR}}</td>
                  <td>{{PDD}}</td>
                  <td>{{MPD}}</td>
                  <td>{{MPD1}}</td>
                  <td>{{Remarksacc}}</td>
                  <td style="text-align:center">
                    <button mat-icon-button (click)="EditOP()">
                      <mat-icon class="grab" data-toggle="Edit">edit</mat-icon>
                    </button>
                  </td>


                  <!--<tr *ngFor="let x of paymentPrint; index as i">
    <td style="text-align:center">{{i+1}}</td>
    <td style="text-align:center">{{x.PaymentMode}}</td>
    <td style="text-align:center">{{x.InstrumentNumber}}</td>
    <td style="text-align:center">{{x.Instrumentdate| date:"dd-MMM-y"}}</td>
    <td style="text-align:center">{{x.BankName}}</td>
    <td style="text-align:center">{{x.BankBranch}}</td>
    <td style="text-align:center">{{x.Amount|currency:Country2}}</td>
  </tr>-->



                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!--/* Prescription  upload */-->
<div class="modal" role="dialog" [ngStyle]="{'display':Uploadfilesblock}">
  <div class="modal-dialog modal-md">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="UploadfilesblockClosesss()">&times;</button>
        <h6 class="modal-title">Upload Prescription</h6>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-1"></div>
          <div class="col-sm-5">
            <div style="margin-top:7px;margin-left: 30px;margin-right: 0px;">
              <img *ngFor='let url of urls; index as i' [lightbox]="i" [src]="url.data.thumb" height="100" width="50" style="margin-left: 8px;border:1px solid #51b8f2;width: 42%;"> <br />
              <span><mat-icon *ngFor='let url of urls; index as i' data-toggle="tooltip" title="Drop Image" (click)="removeUploadImage(i,$event)" class="cursor"> cancel </mat-icon></span>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="choose_file">
            <input type="file" id="UploadPres" #UploadPres accept=".jpg" (change)="selectFiles($event,UploadPres.files)" />
            <button type="button" class="btn btn-warning-default" (click)="UploadPres.click()">Choose file to upload</button>
          </div>
          <small class="refcol"><b> .png, .jpeg Images Supported</b></small>
        </div>
      </div>
    </div>
  </div>
</div>


<!--/* Prescription  input popup */-->
<div class="modal" role="dialog" [ngStyle]="{'display':opticalPrescriptionpopup}">
  <div class="modal-dialog modal-sm">
    <div class="modal-content ">
      <div class="modal-header">
        <h4 class="modal-title text-left">Customer Order</h4>
        <button type="button" class="close" data-dismiss="modal" (click)="opticalPrescriptionpopupNo()">&times;</button>
      </div>
      <div class="modal-body">
        <h5 class="modal-title center">Do you want to Add optical Prescription for the Patient ?</h5>
      </div>
      <div class="modal-footer">
        <button class="btn btn-danger" data-dismiss="modal" autofocus (click)="opticalPrescriptionpopupNo()">No</button>
        <button type="reset" class="btn btn-success" data-dismiss="modal" (click)="opticalPrescriptionpopupYes()">Yes</button>
      </div>
    </div>
  </div>
</div>


<!---------------------------------------optical Prescription data entry form popup----------------------->

<div class="modal height-700px" role="dialog" [ngStyle]="{'display':opticalPrescriptionblock}">
  <div class="modal-dialog modal-lg width-80P">
    <div class="modal-content ">


      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="opticalPrescriptionClose()">&times;</button>
        <h5>
          Optical Prescription
        </h5>
      </div>

      <div class="modal-body">

        <div id="ocular" class="tab-pane fade in active">
          <div class="row">
            <div class="col-sm-12">
              <div class="card mb-3">
                <h5 class="card-header">
                  Optical prescription
                </h5>
                <div class="card-body">



                  <div class="row heightAuto-150px">

                    <table class="custom-table vawithoutbackgroung search-table table-bordered">

                      <tr>
                        <th colspan="6" style="border-right:2px solid gray">OD</th>
                        <th colspan="6">OS</th>
                        <th rowspan="3">BPD</th>
                        <th colspan="2">MPD</th>
                        <th rowspan="3">Remarks</th>

                      </tr>

                      <tr>
                        <th colspan="4">Distance Vision</th>
                        <th colspan="2" style="border-right:2px solid gray">Near Vision</th>
                        <th colspan="4">Distance Vision</th>
                        <th colspan="2">Near Vision</th>
                        <th colspan="1" class="acc">OD</th>
                        <th colspan="1" class="acc">OS</th>
                      </tr>



                      <tr>

                        <th>SPH</th>
                        <th>CYL</th>
                        <th>AXIS</th>
                        <th>V/A</th>
                        <th>SPH</th>
                        <th style="border-right:2px solid gray">V/A</th>
                        <th>SPH</th>
                        <th>CYL</th>
                        <th>AXIS</th>
                        <th>V/A</th>
                        <th>SPH</th>
                        <th>V/A</th>
                        <th colspan="1" class="accw"></th>
                        <th colspan="1"></th>
                      </tr>

                      <tbody>
                        <tr *ngFor="let FINAL of FINALPRESCRIPTION;index as i">

                          <td>
                            <input #DistSphFINAL matInput maxlength="10" value="{{FINAL.DistSph}}" type="text" class="form-control tableinputheight" (keyup.enter)="DescriptionDistSphFINAL(i)" (keyup)="changeValueDistSphFINAL(i,'DistSph',$event);" autocomplete="off">
                          </td>
                          <td>
                            <input #NearCylFINAL matInput maxlength="10" value="{{FINAL.NearCyl}}" type="text" class="form-control tableinputheight" (keyup)="changeValueNearCylFINAL(i,'NearCyl',$event);" (keyup.enter)="DescriptionNearCylFINAL(i)" autocomplete="off">
                          </td>
                          <td>
                            <input #PinAxisFINAL matInput maxlength="10" value="{{FINAL.PinAxis}}" type="text" class="form-control tableinputheight" (keyup)="changeValuePinAxisFINAL(i,'PinAxis',$event);" (keyup.enter)="DescriptionPinAxisFINAL(i)" autocomplete="off">
                          </td>
                          <td id="tablepress" (keypress)="DistanceODtablepress($event)">
                            <mat-select (keyup.enter)="saveDistanceODfinal(i)" (selectionChange)="ChangeDistancefinal(i,$event);DistanceODDfinal.close()" value="{{FINAL.Add}}">
                              <input matInput class="search" autocomplete="off">
                              <mat-option>None</mat-option>
                              <mat-option *ngFor="let VAs of VAname" [value]="VAs.Value">{{VAs.Text}}</mat-option>
                            </mat-select>
                          </td>
                          <td>
                            <input #DistSphNVODFINAL maxlength="10" matInput value="{{FINAL.DistSphNVOD}}" type="text" class="form-control tableinputheight" (keyup)="changeValueDistSphNVODFINAL(i,'DistSphNVOD',$event);" (keyup.enter)="DescriptionDistSphNVODFINAL(i)" autocomplete="off" [disabled]="FINAL.OD">
                          </td>
                          <td style="border-right:2px solid gray" id="tablepress" (keypress)="DistanceODtablepress($event)" (keyup.enter)="DescriptionAddNVODFINAL(i)" [attr.contenteditable]="FINAL.AddNVOD == '' || FINAL.AddNVOD != ''" #AddNVODFINAL>
                            <mat-select #DistanceODDfinalp (keyup.enter)="saveDistanceODfinalp(i)" (selectionChange)="ChangeDistancefinalp(i,$event);DistanceODDfinalp.close()" value="{{FINAL.AddNVOD}}" [disabled]="FINAL.OD">
                              <input matInput class="search" autocomplete="off">
                              <mat-option>None</mat-option>
                              <mat-option *ngFor="let VAsnear1 of VAnamenear1" [value]="VAsnear1.Value">{{VAsnear1.Text}}</mat-option>
                            </mat-select>
                          </td>
                          <td>
                            <input #DistSphOSFINAL maxlength="10" matInput value="{{FINAL.DistSphOS}}" type="text" class="form-control tableinputheight" (keyup)="changeValueDistSphOSFINAL(i,'DistSphOS',$event);" (keyup.enter)="DescriptionDistSphOSFINAL(i)" autocomplete="off" [disabled]="FINAL.OS">
                          </td>
                          <td>
                            <input #NearCylOSFINAL maxlength="10" matInput value="{{FINAL.NearCylOS}}" type="text" class="form-control tableinputheight" (keyup)="changeValueNearCylOSFINAL(i,'NearCylOS',$event);" (keyup.enter)="DescriptionNearCylOSFINAL(i)" autocomplete="off" [disabled]="FINAL.OS">
                          </td>
                          <td>
                            <input #PinAxisOSFINAL maxlength="10" matInput value="{{FINAL.PinAxisOS}}" type="text" class="form-control tableinputheight" (keyup)="changeValuePinAxisOSFINAL(i,'PinAxisOS',$event);" (keyup.enter)="DescriptionPinAxisOSFINAL(i)" autocomplete="off" [disabled]="FINAL.OS">
                          </td>
                          <td id="tablepress" (keypress)="DistanceODtablepress($event)" (keyup.enter)="DescriptionAddOSFINAL(i)" [attr.contenteditable]="FINAL.AddOS == '' || FINAL.AddOS != ''" #AddOSFINAL>
                            <mat-select #DistanceODDfinalos (keyup.enter)="saveDistanceODfinalos(i)" (selectionChange)="ChangeDistancefinalos(i,$event);DistanceODDfinalos.close()" value="{{FINAL.AddOS}}" [disabled]="FINAL.OS">
                              <input matInput #Accepinputdistancefinalos class="search" autocomplete="off">
                              <mat-option>None</mat-option>
                              <mat-option *ngFor="let VAs of VAname" [value]="VAs.Value">{{VAs.Text}}</mat-option>
                            </mat-select>
                          </td>
                          <td>
                            <input #DistSphNVOSFINAL maxlength="10" matInput value="{{FINAL.DistSphNVOS}}" type="text" class="form-control tableinputheight" (keyup)="changeValuesDistSphNVOSFINAL(i,'DistSphNVOS',$event);" (keyup.enter)="DescriptionDistSphNVOSFINAL(i)" autocomplete="off" [disabled]="FINAL.OS">
                          </td>
                          <td id="tablepress" (keypress)="DistanceODtablepress($event)" (keyup.enter)="DescriptionAddNVOSFINAL(i)" [attr.contenteditable]="FINAL.AddNVOS == '' || FINAL.AddNVOS != ''" #AddNVOSFINAL>
                            <mat-select #DistanceODDfinalpos (keyup.enter)="saveDistanceODfinalpos(i)" (selectionChange)="ChangeDistancefinalpos(i,$event);DistanceODDfinalpos.close()" value="{{FINAL.AddNVOS}}" [disabled]="FINAL.OS">
                              <input matInput #Accepinputdistancefinalpos class="search" (input)="FIlterdataNearODacc($event.target.value)" autocomplete="off">
                              <mat-option>None</mat-option>
                              <mat-option *ngFor="let VAsnear1 of VAnamenear1" [value]="VAsnear1.Value">{{VAsnear1.Text}}</mat-option>
                            </mat-select>
                          </td>

                          <td>
                            <input maxlength="5" matInput value="{{FINAL.PD}}" type="text" class="form-control tableinputheight" (keypress)="numberOnlypdno($event)" (keyup)="numberOnlypd(i,'PD',$event);changeValuesPDcommon(i,'PD',$event)" (keyup.enter)="DescriptionPDFINAL(i)" autocomplete="off">
                          </td>

                          <td>
                            <input maxlength="5" matInput value="{{FINAL.MPDOD}}" type="text" class="form-control tableinputheight" (keyup)="changeValuesMPDODcommon(i,'MPDOD',$event);MPDOD(i,$event);" (keyup.enter)="DescriptionMPDODFINAL(i)" autocomplete="off">
                          </td>

                          <td>
                            <input maxlength="5" matInput value="{{FINAL.MPDOS}}" type="text" class="form-control tableinputheight" (keyup)="changeValuesMPDOScommon(i,'MPDOS',$event);MPDOS(i,$event);" (keyup.enter)="DescriptionMPDOSFINAL(i)" autocomplete="off">
                          </td>

                          <td>
                            <input matInput value="{{FINAL.Remarks}}" type="text" class="form-control tableinputheight" (keyup)="changeValuesRemarksFINAL(i,'Remarks',$event);" (keyup.enter)="DescriptionRemarksFINAL(i)" autocomplete="off">
                          </td>

                        </tr>
                      </tbody>

                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>

      <div class="modal-footer">
        <div class="row ">
          <div class="content-right sub-section btn-wrap">
            <button class="btn btn-warning-default" (click)="CancelOpticalPrescription()">Cancel</button>
            <button class="success btn btn-primary" (click)="onsubmitOpticalPrescription()">Submit</button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
