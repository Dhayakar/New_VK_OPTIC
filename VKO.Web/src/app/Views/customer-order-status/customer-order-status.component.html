<div class="col-sm-12">
  <div class="row">
    <h5 align="center" class="card-header">
      <b>Customer &nbsp; Order &nbsp; Status</b>
    </h5>
  </div>
</div>
<div class="col-sm-12 border-blue border-radius">
  <div class="row m-3">
    <div class="col-sm-4 mt-0px width-32p">
      <div class="row">
        <div class="col-sm-7">
          <div class="row">
            <div class="col-sm-9">
              <mat-label class="refcol">Customer Name:</mat-label>
            </div>
          </div>
        </div>
        <div class="col-sm-6 f-r mt-n5p width-60p">
          <mat-label class="ml-n10p">{{M_CustomerName}}</mat-label>
        </div>
      </div>
      <div class="row ml-1p">
        <div class="col-sm-3 ml-9p height-50px">
          <mat-label class="refcol">Address:</mat-label>
        </div>
        <div class="col-sm-5 ml-n2p">
          <mat-label>{{M_Address}}</mat-label>
        </div>
      </div>
      <div class="row ml-5p">
        <div class="col-sm-6">
          <mat-label class="refcol">Contact No:</mat-label>
        </div>
        <div class="col-sm-6 f-r mt-n7p width-60p">
          <mat-label class="ml-n20p">{{M_MobileNo}}</mat-label>
        </div>
      </div>
    </div>
    <div class="col-sm-2 mt-1p width-22p">
      <div class="row">
        <div class="col-sm-7">
          <div class="row">
            <div class="col-sm-9">
              <mat-label class="refcol">Order No:</mat-label>
            </div>
            <div class="col-sm-3 ml-n25p">
              <mat-icon class="cursor" (click)="PlacedOrderedList()" [disabled]="isNextButton" data-toggle="tooltip" title="Search Ordered List">search</mat-icon>
            </div>
          </div>
        </div>
        <div class="col-sm-5  ml-n20p">
          <mat-label>{{M_OrderNo}}</mat-label>
        </div>
      </div>
      <div class="row mt-1p">
        <div class="col-sm-5 mt-13p width-50p ml-n8p">
          <mat-label class="refcol ml-6p">Order Date:</mat-label>
        </div>
        <div class="col-sm-7 mt-13p ml-n3p">
          <mat-label *ngIf="!Prints" class="mt-12p">{{M_OrderDate | date:'dd-MMM-y'}}</mat-label>
          <mat-label *ngIf="Prints" class="mt-12p ml-n23p">{{M_OrderDate | date:'dd-MMM-y, HH:mm'}}</mat-label>
        </div>
      </div>
    </div>
    <div class="col-sm-2 mt-1p width-22p">
      <div class="row">
        <div class="col-sm-5">
          <mat-label class="refcol">Ref No:</mat-label>
        </div>
        <div class="col-sm-5 mt-n4p ml-n16p width-70p">
          <mat-form-field appearance="outline">
            <mat-label>Ref No</mat-label>
            <input [(ngModel)]="M_RefNo" matInput name="RefNo" type="text"  disabled>
          </mat-form-field>
        </div>
      </div>
      <div class="row mt-10p">
        <div class="col-sm-5 ml-n3p">
          <mat-label class="refcol ml-n15p">Ref Date:</mat-label>
        </div>
        <div class="col-sm-5 mt-n4p ml-n19p width-80p">
          <mat-form-field appearance="outline">
            <mat-label>Ref Date</mat-label>
            <input [(ngModel)]="M_Refdate" name="Refdate" matInput [matDatepicker]="picker1" [max]="date" placeholder="" disabled>
            <mat-datepicker-toggle matSuffix [for]="picker1"></mat-datepicker-toggle>
            <mat-datepicker #picker1></mat-datepicker>
          </mat-form-field>
        </div>
      </div>
    </div>
    <div class="col-sm-2 mt-1p width-22p">
      <div class="row">
        <div class="col-sm-7">
          <mat-label class="refcol  ml-n12p">Prescription Date:</mat-label>
        </div>
        <div class="col-sm-5 f-r mt-n8p width-60p">
          <mat-label class="ml-9p">{{M_PrescriptionDate| date:'dd-MMM-y, HH:mm'}}</mat-label>
        </div>
      </div>
      <div class="row mt-14p">
        <div class="col-sm-7">
          <mat-label class="refcol ml-n24p">Prescription Doctor:</mat-label>
        </div>
        <div class="col-sm-5 f-r mt-n8p width-60p">
          <mat-label class="ml-17p">{{M_PrescribedDoctor}}</mat-label>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-sm-4">
      <div class="col-sm-6 ml-17p">
        <mat-label class="refcol">Status:</mat-label>
      </div>
      <div class="col-sm-6 f-r mt-n7p width-60p" *ngIf ="OrderStatus">
        <mat-form-field appearance="outline">
          <mat-label>Status</mat-label>
          <mat-select [(ngModel)]="M_Status" name="Status">
            <mat-option value="Open">Open</mat-option>
            <mat-option value="Ready">Ready</mat-option>
          </mat-select>
        </mat-form-field>
      </div>
      <div class="col-sm-6 f-r mt-n5p width-60p" *ngIf ="!OrderStatus">
        <mat-label>{{M_Status}}</mat-label>
      </div>
    </div>
  </div>
  <div class="col-sm-12">
    <div class="container">
      <input id="tab-1" class="ItemDetailsTab" type="radio" name="tabs" checked="checked" />
      <input id="tab-2" type="radio" name="tabs" />
      <div class="tabs">
        <label for="tab-1">Item Details</label>
        <label for="tab-2">Payment Details</label>
      </div>
      <div class="content">
        <div class="tab  position-sticky width-100p">
          <div class="col-sm-12 mt-1p">
            <div class="mb-12">
              <h5 class="card-header text-white">
                Item Details
              </h5>
              <div class="card-body">

                <div class="row heightAuto-300px  position-sticky">
                  <table mat-table matSort [dataSource]="PrintdataSource" class="custom-table withoutbackgroung search-table table-bordered">

                    <ng-container matColumnDef="Type">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Type</th>
                      <td mat-cell *matCellDef="let element ;let i = index;">{{element.Type}}  </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="Types">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Type </th>
                    </ng-container>


                    <ng-container matColumnDef="Brand">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Brand</th>
                      <td mat-cell *matCellDef="let element;let i = index;">
                        {{element.Brand}}
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="Brands">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Brand </th>
                    </ng-container>


                    <ng-container matColumnDef="Description">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Description</th>
                      <td mat-cell *matCellDef="let element ;let i = index;">
                        {{element.Sph}}{{element.Cyl}}{{element.Axis}}{{element.Add}}
                        {{element.FrameShapeID}}{{element.FrameStyleID}}{{element.FrameTypeID}}{{element.FrameWidthID}}
                      </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="Descriptions">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Description </th>
                    </ng-container>



                    <ng-container matColumnDef="UOM">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">UOM</th>
                      <td mat-cell *matCellDef="let element"> {{element.UOM}} </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="UOMs">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> UOM </th>
                    </ng-container>

                    <ng-container matColumnDef="QTY">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">QTY</th>
                      <td mat-cell *matCellDef="let element; let id = index;" class="text-end"> {{element.Quantity}} </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="QTYs">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> QTY </th>
                    </ng-container>

                    <ng-container matColumnDef="Price">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Price</th>
                      <td mat-cell *matCellDef="let element" class="text-end"> {{element.UnitPrice| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="Prices">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Price </th>
                    </ng-container>



                    <ng-container matColumnDef="Amount">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Amount</th>
                      <td mat-cell *matCellDef="let element" class="text-end">{{ element.GivenQtyPrice | number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef class="text-end"><b>{{getItemAmount() | currency:Country2}}</b></td>
                    </ng-container>
                    <ng-container matColumnDef="Amounts">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Amount</th>
                    </ng-container>

                    <ng-container matColumnDef="Discount%">
                      <th mat-header-cell *matHeaderCellDef>%</th>
                      <td mat-cell *matCellDef="let element"> {{element.Discount| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>
                    <ng-container matColumnDef="DiscountAmount">
                      <th mat-header-cell *matHeaderCellDef> Amount</th>
                      <td mat-cell *matCellDef="let element" class="text-end">{{element.DiscountAmount| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef class="text-end"><b>{{getDiscountAmount() | currency:Country2}}</b></td>
                    </ng-container>


                    <ng-container matColumnDef="GrossAmount">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">GrossAmount</th>
                      <td mat-cell *matCellDef="let element" class="text-end">{{element.GrossAmount| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef class="text-end"><b>{{getGrossAmount() | currency:Country2}}</b></td>
                    </ng-container>
                    <ng-container matColumnDef="GrossAmounts">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> GrossAmount </th>
                    </ng-container>

                    <ng-container matColumnDef="CGST">
                      <th mat-header-cell *matHeaderCellDef>%</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.CGST | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef> </td>
                    </ng-container>

                    <ng-container matColumnDef="CGSTValue">
                      <th mat-header-cell *matHeaderCellDef> Amount</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.CGSTValue | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef><b>{{GetCGSTAmount() | currency:Country2}}</b> </td>

                    </ng-container>

                    <ng-container matColumnDef="SGST">
                      <th mat-header-cell *matHeaderCellDef>%</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.SGST | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef></td>
                    </ng-container>

                    <ng-container matColumnDef="SGSTValue">
                      <th mat-header-cell *matHeaderCellDef> Amount</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.SGSTValue | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef><b>{{GetSGSTAmount() | currency:Country2}}</b></td>
                    </ng-container>

                    <ng-container matColumnDef="IGST">
                      <th mat-header-cell *matHeaderCellDef>%</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.IGST | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef></td>
                    </ng-container>

                    <ng-container matColumnDef="IGSTValue">
                      <th mat-header-cell *matHeaderCellDef> Amount</th>
                      <td mat-cell *matCellDef="let element;let id = index;">{{element.IGSTValue | number : '1.2-2'}}</td>
                      <td mat-footer-cell *matFooterCellDef><b>{{GetIGSTAmount() | currency:Country2}}</b></td>
                    </ng-container>


                    <ng-container matColumnDef="NetAmount">
                      <th mat-header-cell *matHeaderCellDef [ngStyle]="{'display': 'none'}">Net Amount</th>
                      <td mat-cell *matCellDef="let element" class="text-end">{{element.Amount| number : '1.2-2'}} </td>
                      <td mat-footer-cell *matFooterCellDef class="text-end"><b>{{getTotalAmount() | currency:Country2}}</b></td>
                    </ng-container>


                    <ng-container matColumnDef="NetAmounts">
                      <th mat-header-cell *matHeaderCellDef [attr.rowspan]="2"> Net Amount </th>
                    </ng-container>
                    <ng-container matColumnDef="header-row-group">
                      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> Discount </th>
                    </ng-container>
                    <ng-container matColumnDef="CGSTTax">
                      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> CGST Tax </th>
                    </ng-container>
                    <ng-container matColumnDef="SGSTTax">
                      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> SGST Tax </th>
                    </ng-container>

                    <ng-container matColumnDef="IGSTTax">
                      <th mat-header-cell *matHeaderCellDef [attr.colspan]="2"> IGST Tax </th>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="PrintdisplayedColumnsCombined;sticky: true"></tr>

                    <tr mat-header-row *matHeaderRowDef="PrintdisplayedColumns;sticky:true"></tr>
                    <tr mat-row *matRowDef="let row;  let even = even;columns: PrintdisplayedColumns;"></tr>
                    <tr mat-footer-row *matFooterRowDef="PrintdisplayedColumns;sticky: true"></tr>
                  </table>
                </div>

              </div>
            </div>
          </div>
        </div>
        <div class="tab  position-sticky width-100p">

          <div class="col-sm-12 heightAuto-200px">
            <table mat-table matSort [dataSource]="dataSource3" class="custom-table withoutbackgroung search-table table-bordered">
              <ng-container matColumnDef="PaymentMode">
                <th mat-header-cell *matHeaderCellDef>PaymentMode</th>
                <td mat-cell *matCellDef="let element">{{element.PaymentMode}}</td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="InstrumentNumber">
                <th mat-header-cell *matHeaderCellDef>Instrument Number</th>
                <td mat-cell *matCellDef="let element">{{element.InstrumentNumber}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="InstrumentDate">
                <th mat-header-cell *matHeaderCellDef>Instrument Date</th>
                <td mat-cell *matCellDef="let element">{{element.Instrumentdate| date:'dd-MMM-y'}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="BankName">
                <th mat-header-cell *matHeaderCellDef>Bank Name</th>
                <td mat-cell *matCellDef="let element">{{element.BankName}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="Branch">
                <th mat-header-cell *matHeaderCellDef>Branch</th>
                <td mat-cell *matCellDef="let element">{{element.BankBranch}} </td>
                <td mat-footer-cell *matFooterCellDef> </td>
              </ng-container>
              <ng-container matColumnDef="ExpiryDate">
                <th mat-header-cell *matHeaderCellDef>Expiry Date</th>
                <td mat-cell *matCellDef="let element">{{element.Expirydate| date:'dd-MMM-y'}} </td>
                <td mat-footer-cell *matFooterCellDef><strong>Total Amount</strong> </td>
              </ng-container>
              <ng-container matColumnDef="Amount">
                <th mat-header-cell *matHeaderCellDef>Amount</th>
                <td mat-cell *matCellDef="let element">{{element.Amount | number : '1.2-2'}} </td>
                <td mat-footer-cell *matFooterCellDef><strong>{{getPaymentTotalCost() | number : '1.2-2'}}</strong> </td>
              </ng-container>
              <tr mat-header-row *matHeaderRowDef="displayedColumns3;sticky: true"></tr>
              <tr mat-row *matRowDef="let element;  let even = even; columns: displayedColumns3"></tr>
              <tr mat-footer-row *matFooterRowDef="displayedColumns3;sticky: true"></tr>
            </table>
          </div>


        </div>
      </div>
    </div>
  </div>
  <div class="col-sm-12 pb25">
    <div class="content-right  sub-section btn-wrap">
      <button type="button" class="btn btn-warning-default" (click)="clear()"><strong>Cancel</strong></button>
      <button  [disabled]="!OrderStatus" class="success btn btn-primary" (click)="Submit()">Submit</button>
    </div>
  </div>
</div>





<!--/* Ordered List Popup */-->
<div class="modal" role="dialog" [ngStyle]="{'display':OrderedListModel}">
  <div class="modal-dialog modal-lg">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" (click)="OrderedListModelClose()">&times;</button>
        <h6 class="modal-title">Customer Order Details</h6>
      </div>
      <div class="modal-body">
        <div class="row">
          <div class="col-sm-3">
            <mat-form-field appearance="outline">
              <mat-label>Search</mat-label>
              <input matInput (keyup)="applyFilter2($event)" placeholder="">
            </mat-form-field>
          </div>
        </div>
        <div class="row heightAuto-300px">
          <table mat-table matSort [dataSource]="dataSource4" class="custom-table withoutbackgroung search-table table-bordered">
            <ng-container matColumnDef="Action">
              <th mat-header-cell *matHeaderCellDef>Action</th>
              <td mat-cell *matCellDef="let element; let i = index;">
                <mat-icon class="cursor" data-toggle="tooltip" title="select" (click)="SelectOrderNo(element)">create</mat-icon>
              </td>
            </ng-container>
            <ng-container matColumnDef="OrderNo">
              <th mat-header-cell *matHeaderCellDef>Order No</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.OrderNo}}</td>
            </ng-container>
            <ng-container matColumnDef="OrderDate">
              <th mat-header-cell *matHeaderCellDef>Order Date</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.OrderDate | date:'dd-MMM-y'}} </td>
            </ng-container>
            <ng-container matColumnDef="CustomerName">
              <th mat-header-cell *matHeaderCellDef>Customer Name</th>
              <td mat-cell *matCellDef="let element" data-toggle="tooltip" title="Select">{{element.CustomerName}} </td>
            </ng-container>
            <ng-container matColumnDef="OrderStatus">
              <th mat-header-cell *matHeaderCellDef>Order Status</th>
              <td mat-cell *matCellDef="let element"> {{element.OrderStatus}} </td>
            </ng-container>

            <tr mat-header-row *matHeaderRowDef="displayedColumns4;sticky:true"></tr>
            <tr mat-row *matRowDef="let row;  let even = even;columns: displayedColumns4;" [ngClass]="{gray: even}"></tr>
          </table>
        </div>
      </div>
    </div>
  </div>
</div>
